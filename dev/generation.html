<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Signal Generation · RP DAQ Server</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="RP DAQ Server logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">RP DAQ Server</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="architecture.html">Architecture</a></li><li><a class="tocitem" href="installation.html">Installation</a></li><li><a class="tocitem" href="connections.html">Connections</a></li><li><a class="tocitem" href="cluster.html">Cluster</a></li><li><a class="tocitem" href="acquisition.html">Data Acquisition</a></li><li class="is-active"><a class="tocitem" href="generation.html">Signal Generation</a><ul class="internal"><li><a class="tocitem" href="#Waveforms"><span>Waveforms</span></a></li><li><a class="tocitem" href="#Sequences"><span>Sequences</span></a></li></ul></li><li><a class="tocitem" href="scpi.html">SCPI Interface</a></li><li><a class="tocitem" href="client.html">Client Library</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="examples/simple.html">Simple</a></li><li><a class="tocitem" href="examples/waveforms.html">Waveforms</a></li><li><a class="tocitem" href="examples/sequence.html">Sequence</a></li><li><a class="tocitem" href="examples/sequenceMultiChannel.html">Sequence Multi-Channel and Waveform Enable</a></li><li><a class="tocitem" href="examples/cluster.html">Cluster</a></li><li><a class="tocitem" href="examples/producerConsumer.html">Continous Signal Acquisition</a></li></ul></li><li><a class="tocitem" href="fpga.html">FPGA Development</a></li><li><a class="tocitem" href="devtips.html">Development Tips</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="generation.html">Signal Generation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="generation.html">Signal Generation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tknopp/RedPitayaDAQServer/blob/master/docs/src/generation.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Signal-Generation"><a class="docs-heading-anchor" href="#Signal-Generation">Signal Generation</a><a id="Signal-Generation-1"></a><a class="docs-heading-anchor-permalink" href="#Signal-Generation" title="Permalink"></a></h1><p>Once the acquisition is triggered, each RedPitaya also starts producing signals on their output channels. Each RedPitaya features six such channels, two of those are the 16-bit DAC channel and four of those are digital pins using PDM, see <a href="connections.html">Connections</a>. The output signals are composed of two parts: parameterized waveforms and repeating arbitrary LUT tables. The latter are called sequences. The resulting signal of the DAC channel can be described as: </p><p class="math-container">\[S_i(t) = seq_i(t) + o_i + a_{i,1}w(t, f_{i,1}, \varphi_{i, 1}) +\sum_{j=2}^{4}a_{i,j} \sin(2\pi f_{i,j}t + \varphi_{i, j}),\]</p><h2 id="Waveforms"><a class="docs-heading-anchor" href="#Waveforms">Waveforms</a><a id="Waveforms-1"></a><a class="docs-heading-anchor-permalink" href="#Waveforms" title="Permalink"></a></h2><p>Each of the 16-bit DAC channel can output a compositve waveform with four components. Each component can be parametrized by its amplitude, frequency and phase, which can all be changed via SCPI commands. Furthermore, the first component also offers different waveforms (sine, square, sawtooth), while the remaining components only offer a sine waveform.</p><p>Additionally, each channel also has an offset parameter and a calibration offset. The calibration offset is stored in the RedPitayas EEPROM and is applied in the background.</p><h2 id="Sequences"><a class="docs-heading-anchor" href="#Sequences">Sequences</a><a id="Sequences-1"></a><a class="docs-heading-anchor-permalink" href="#Sequences" title="Permalink"></a></h2><p>The FPGA image features a LUT containing values for all output channels. This LUT is treated as a ring-buffer through which the image iterates and outputs the values on their respective channel. The image can be configured to increment its LUT access every n samples. One period of a value is also called a step.</p><p>As the LUT used by the FPGA image is small in comparison with the main memory and to support longer series of steps, the server itselfs maintains a list of sequences. A sequence is a series of steps and the number of times this series is to be repeated. During an acqusition and the parallel signal generation the server periodically reads the next steps from its sequence list and writes them to the LUT of the image.</p><p>Comparable to the sample transmission of the acquisition, this updating of the LUT is also a process with timing uncertainty as it is affected by the scheduling and execution of the RedPitayas CPU. While during the sample transmission samples could be lost because they were overwritten, in the signal generation wrong signals could be output because the server was too slow in updating the values. Here, the server tracks similar performance metrics and also features a status flag <code>lostSteps</code> for exactly this case. In its current implementation a safe step rate is at 12 kHz.</p><p>Sequences and their steps also have additional features. A step can be marked such that during its duration the signal is set to 0. The last step of a sequence can also be marked such that the phase of the waveforms is reset to 0 for the following sequence. This involves adding an additional reset step.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="acquisition.html">« Data Acquisition</a><a class="docs-footer-nextpage" href="scpi.html">SCPI Interface »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.15 on <span class="colophon-date" title="Wednesday 13 April 2022 13:58">Wednesday 13 April 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
