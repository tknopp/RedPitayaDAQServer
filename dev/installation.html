<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Installation · RP DAQ Server</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="RP DAQ Server logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">RP DAQ Server</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="architecture.html">Architecture</a></li><li class="is-active"><a class="tocitem" href="installation.html">Installation</a><ul class="internal"><li><a class="tocitem" href="#Alpine-Linux-Image"><span>Alpine Linux Image</span></a></li><li><a class="tocitem" href="#Setting-Up-the-Server"><span>Setting Up the Server</span></a></li><li><a class="tocitem" href="#Setting-Up-the-Julia-Client-Library"><span>Setting Up the Julia Client Library</span></a></li></ul></li><li><a class="tocitem" href="connections.html">Connections</a></li><li><a class="tocitem" href="cluster.html">Cluster</a></li><li><a class="tocitem" href="acquisition.html">Data Acquisition</a></li><li><a class="tocitem" href="generation.html">Signal Generation</a></li><li><a class="tocitem" href="scpi.html">SCPI Interface</a></li><li><a class="tocitem" href="client.html">Client Library</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="examples/simple.html">Simple</a></li><li><a class="tocitem" href="examples/waveforms.html">Waveforms</a></li><li><a class="tocitem" href="examples/sequence.html">Sequence</a></li><li><a class="tocitem" href="examples/sequenceMultiChannel.html">Sequence Multi-Channel and Waveform Enable</a></li><li><a class="tocitem" href="examples/cluster.html">Cluster</a></li><li><a class="tocitem" href="examples/producerConsumer.html">Continous Signal Acquisition</a></li></ul></li><li><a class="tocitem" href="fpga.html">FPGA Development</a></li><li><a class="tocitem" href="devtips.html">Development Tips</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="installation.html">Installation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="installation.html">Installation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tknopp/RedPitayaDAQServer/blob/master/docs/src/installation.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h1><h2 id="Alpine-Linux-Image"><a class="docs-heading-anchor" href="#Alpine-Linux-Image">Alpine Linux Image</a><a id="Alpine-Linux-Image-1"></a><a class="docs-heading-anchor-permalink" href="#Alpine-Linux-Image" title="Permalink"></a></h2><p>The RedPitayaDAQServer project uses a custom RedPitaya image that was derived from the <a href="https://github.com/pavel-demin/red-pitaya-notes">red-pitaya-notes</a> project. It consists of an Alpine Linux with some development tools installed. Additionally the image reserves the upper 128 MB of main memory for the FPGA, which is used as a buffer for recording the data from the ADCs. The Linux image can be downloaded <a href="https://github.com/tknopp/RedPitayaDAQServer/releases/download/v0.4.2/red-pitaya-alpine-3.14-armv7-20220216.zip">here</a>. Just unzip the zip file and copy the content on an empty SD card that is formatted in FAT32.</p><p>If you want to build the Linux image yourself, you can install Xilinx Vitis and Vivado (2021.2) in an Ubuntu environment (bare metal or virtual machine). Then run</p><pre><code class="nohighlight hljs">sudo apt-get update

sudo apt-get --no-install-recommends install \
  build-essential bison flex git curl ca-certificates sudo \
  xvfb fontconfig libxrender1 libxtst6 libxi6 make \
  bc u-boot-tools device-tree-compiler libncurses5-dev \
  libssl-dev qemu-user-static binfmt-support zip \
  squashfs-tools dosfstools parted debootstrap zerofree</code></pre><p>in order to get the essential tools. Afterwards clone the project with</p><pre><code class="nohighlight hljs">git clone https://github.com/tknopp/RedPitayaDAQServer</code></pre><p>Then switch into this directory. You can build the whole project using</p><pre><code class="nohighlight hljs">make all</code></pre><p>For only building some parts, such as the FPGA image, please refer to the Makefile.</p><p>Note: <code>make</code> has to be run as root if you want to build the Linux image, since <code>chroot</code> requires <code>root</code> privileges.</p><h2 id="Setting-Up-the-Server"><a class="docs-heading-anchor" href="#Setting-Up-the-Server">Setting Up the Server</a><a id="Setting-Up-the-Server-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-Up-the-Server" title="Permalink"></a></h2><p>Next you need to install the server application. To this end, connect the RedPitaya to you local network and access the device via ssh:</p><pre><code class="nohighlight hljs">ssh root@rp-f?????.local</code></pre><p>where ????? is the ID that is printed on the RedPitaya. The default password is <code>root</code>. After logging into the RedPitaya go to the folder</p><pre><code class="nohighlight hljs">/root/apps/</code></pre><p>and clone the RedPitayaDAQServer project:</p><pre><code class="nohighlight hljs">git clone https://github.com/tknopp/RedPitayaDAQServer</code></pre><p>Sometimes you might need to make the file system writable by entering</p><pre><code class="nohighlight hljs">mount -o remount,rw /dev/mmcblk0p1</code></pre><p>Then cd into RedPitayaDAQServer</p><pre><code class="nohighlight hljs">cd /root/apps/RedPitayaDAQServer</code></pre><p>and enter <code>make server</code>. This will compile the library, the server, and some example applications. After you restart the RedPitaya the DAQ server will automatically run and you can access it via TCP.</p><h2 id="Setting-Up-the-Julia-Client-Library"><a class="docs-heading-anchor" href="#Setting-Up-the-Julia-Client-Library">Setting Up the Julia Client Library</a><a id="Setting-Up-the-Julia-Client-Library-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-Up-the-Julia-Client-Library" title="Permalink"></a></h2><p>For the Julia client library you need to install RedPitayaDAQServer within Julia. To this end download Julia 1.5 or later and go into the package manager mode by intering ]. Then there are two options to install the client library.</p><ul><li>add RedPitayaDAQServer:src/client/julia</li><li>dev RedPitayaDAQServer:src/client/julia</li></ul><p>The first is installing the currently published version. The second is installing in development mode and put the files to <code>~/dev/RedPitayaDAQServer/</code> where you can the also modify the files, which is handy when trying out the examples. Right now we recommend to <code>dev</code> the package. You need to <code>git pull</code> from <code>~/dev/RedPitayaDAQServer/</code> if you want to get updates, i.e. Julia will not update developed packages automatically.</p><p>The client library is not an executable data acquisition program, but it can be used to implement one. The library encapsulates the communication with the server and implements various optimizations. As the communication with the server is language agnostic and one could therefore implement their own client in a different language. The Julia reference client library found in <code>src/client/julia</code>, the <a href="scpi.html">SCPI commands</a> and the sections on the signal <a href="acqusition.md">acquisition</a> and <a href="generation.html">generation</a> are starting points for such a custom client.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="architecture.html">« Architecture</a><a class="docs-footer-nextpage" href="connections.html">Connections »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.14 on <span class="colophon-date" title="Friday 4 March 2022 16:12">Friday 4 March 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
